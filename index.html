<!DOCTYPE html>
<html lang="fr">
  <head>
    <title>DataGroove</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=5" />
    <meta name="Description" content="DataGroove">
    <link rel="canonical" href="https://bjperson.github.io/datagroove/"/>
    <link rel="manifest" href="manifest.webmanifest" crossorigin="use-credentials">
    <meta name="theme-color" content="#8a0000"/>
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/d3.v7.min.js"></script>

    <!-- <script src="assets/js/idb-keyval/index-min.js"></script> -->

    <link href='assets/css/style.css' rel='stylesheet' />
    <link href="day.xml" type="application/atom+xml" rel="alternate" title="Synthèse journalière" />
  </head>

  <body>

    <noscript>
      <div>
        <h2><b>Attention : Javascript semble désactivé</b></h2>
        <p>Veuillez activer Javascript dans votre navigateur si vous souhaitez pouvoir naviguer sur ce site.</p>
      </div>
    </noscript>

    <header>
      <a href="javascript:showFlux();" style="float:right;"><svg style="width:22px;" enable-background="new 0 0 455.731 455.731" version="1.1" viewBox="0 0 455.73 455.73" xmlns="http://www.w3.org/2000/svg"><rect width="455.73" height="455.73" fill="#FA6400"/><g fill="#fff"><path d="m296.21 159.16c-61.763-61.763-143.94-95.778-231.4-95.778v64.348c70.268 0 136.29 27.321 185.9 76.931 49.609 49.61 76.931 115.63 76.931 185.9h64.348c-1e-3 -87.456-34.016-169.64-95.779-231.4z"/><path d="m64.143 172.27v64.348c84.881 0 153.94 69.056 153.94 153.94h64.348c0-120.36-97.922-218.29-218.29-218.29z"/><circle cx="109.83" cy="346.26" r="46.088"/></g></svg></a>
      <svg id="logo" version="1.1" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" style="width: 2em;"><g><rect x=".99217" y="1.0183" width="3.75" height="3.75" fill="#f00" opacity=".98"></rect><rect x=".99217" y="5.6756" width="3.75" height="3.75" fill="#f60" opacity=".98"></rect><rect x=".99217" y="10.48" width="3.75" height="3.75" fill="#d9d300" opacity=".98"></rect><rect x=".99217" y="15.284" width="3.75" height="3.75" fill="#008000" opacity=".98"></rect><rect x="5.7978" y="1.0183" width="3.75" height="3.75" fill="#f00" opacity=".98"></rect><rect x="5.7978" y="5.6756" width="3.75" height="3.75" fill="#f60" opacity=".98"></rect><rect x="5.7978" y="10.48" width="3.75" height="3.75" fill="#d9d300" opacity=".98"></rect><rect x="5.7978" y="15.284" width="3.75" height="3.75" fill="#008000" opacity=".98"></rect><rect x="10.597" y="1.0183" width="3.75" height="3.75" fill="#f00" opacity=".98"></rect><rect x="10.597" y="5.6756" width="3.75" height="3.75" fill="#f60" opacity=".98"></rect><rect x="10.597" y="10.48" width="3.75" height="3.75" fill="#d9d300" opacity=".98"></rect><rect x="10.597" y="15.284" width="3.75" height="3.75" fill="#008000" opacity=".98"></rect><rect x="15.396" y="5.6756" width="3.75" height="3.75" fill="#f60" opacity=".98"></rect><rect x="15.396" y="10.48" width="3.75" height="3.75" fill="#d9d300" opacity=".98"></rect><rect x="15.396" y="15.284" width="3.75" height="3.75" fill="#008000" opacity=".98"></rect></g></svg>
      <h1 onclick="javascript:showFlux();">
        DataGroove
        <br />
        <span class="subtitle">Flux RSS pour l'Open Data en France</span>
      </h1>
    </header>


    <nav class="menu">
      <ul>
        <li><a href="?p=flux">Flux</a></li>
        <li><a href="?p=popular">Populaires</a></li>
        <li><a href="?p=reuses">Réutilisations</a></li>
        <li><a href="javascript:latest();">Synthèse</a></li>
      </ul>
    </nav>

    <main>

      <article id="content">

      </article>

      <a href="javascript:uiScrollToId('#logo');" id="top_link">^</a>

    </main>

    <footer>
      <p><a target="_blank" rel="noreferrer" href="https://www.gnu.org/licenses/agpl-3.0.html"><svg width="9.436mm" height="3.175mm" version="1.1" viewBox="0 0 9.436 3.175" xmlns="http://www.w3.org/2000/svg"><g transform="translate(329.18 35.563)"><g transform="matrix(.041859 0 0 .041859 -341.4 -42.453)" fill="#a0a0a0"><path d="m327.21 217.25-2.968-4.744h-17.146l-3.021 4.744h-3.764c1.184-1.925 2.39-3.878 3.617-5.856 1.229-1.979 2.434-3.922 3.617-5.83 1.184-1.908 2.333-3.754 3.445-5.539 1.113-1.785 2.164-3.463 3.154-5.036 0.282-0.601 0.777-0.901 1.484-0.901 0.652 0 1.139 0.3 1.457 0.901l13.912 22.261zm-18.074-8.03h13.013l-5.963-9.567c-0.194-0.318-0.371-0.477-0.53-0.477-0.177 0-0.354 0.159-0.529 0.477z"/><path d="m360.65 215.74c-1.271 1.007-2.809 1.51-4.611 1.51h-16.006c-1.82 0-3.34-0.495-4.559-1.484-1.308-1.024-1.961-2.288-1.961-3.79v-12.615c0-1.466 0.653-2.72 1.961-3.763 1.272-1.007 2.81-1.51 4.611-1.51h16.033c1.678 0 3.101 0.468 4.267 1.405 1.22 0.937 2.005 2.412 2.358 4.425h-3.26c-0.229-0.972-0.662-1.652-1.298-2.041-0.548-0.335-1.246-0.503-2.095-0.503h-16.006c-0.954 0-1.767 0.221-2.438 0.663-0.584 0.371-0.875 0.813-0.875 1.325v12.615c0 0.53 0.291 0.99 0.875 1.378l-0.027-0.026c0.654 0.441 1.458 0.662 2.412 0.662h16.006c0.83 0 1.572-0.176 2.227-0.53 0.777-0.371 1.166-0.875 1.166-1.511v-4.638h-12.959v-3.26h16.192v7.924c2e-3 1.467-0.67 2.721-2.013 3.764z"/><path d="m394.86 205.8c-1.219 0.99-2.748 1.484-4.585 1.484h-19.319v9.964h-3.259v-17.888c0-1.466 0.653-2.72 1.961-3.763 1.272-1.007 2.81-1.51 4.61-1.51h16.007c1.784 0 3.304 0.503 4.559 1.51 1.325 1.043 1.987 2.297 1.987 3.763v2.65c0 1.502-0.653 2.765-1.961 3.79zm-1.271-6.44c0-0.495-0.301-0.936-0.902-1.325-0.671-0.442-1.475-0.663-2.411-0.663h-16.032c-0.813 0-1.547 0.168-2.199 0.503-0.726 0.336-1.088 0.831-1.088 1.484v4.665h19.319c0.937 0 1.74-0.212 2.411-0.636 0.602-0.388 0.902-0.848 0.902-1.378z"/><path d="m430.98 212.08c-0.266 1.573-1.007 2.836-2.227 3.79-1.184 0.919-2.614 1.378-4.293 1.378h-16.033c-1.802 0-3.33-0.495-4.584-1.484-1.325-1.024-1.987-2.288-1.987-3.79v-17.862h3.312v17.862c0 0.53 0.292 0.99 0.875 1.378l-0.027-0.026c0.654 0.441 1.458 0.662 2.412 0.662h16.033c0.813 0 1.52-0.176 2.12-0.53h-0.025c0.636-0.389 1.067-1.051 1.298-1.987h2.597z"/></g><g stroke-width="6.3207"><g transform="matrix(.041859 0 0 .041859 -341.4 -42.453)"><g stroke-width="6.3207"><path d="m483.22 164.58h19.454l-29.968 50.5c-1.712 2.815-3.382 4.981-5.01 6.499s-3.132 2.622-4.512 3.311c-1.379 0.691-2.566 1.091-3.559 1.201-0.994 0.111-1.686 0.166-2.07 0.166h-17.882v-43.628h16.724l0.082 29.968z" fill="#742e68" stroke-width="6.3207"/></g></g><g transform="matrix(.041859 0 0 .041859 -341.4 -42.453)"><rect x="291.9" y="226.25" width="147.77" height="14.173" fill="#742e68"/><g fill="#fff"><path d="m332.53 231.77c0.036-0.249-6e-3 -0.421-0.131-0.516h7e-3c-0.114-0.086-0.278-0.129-0.497-0.129h-4.098c-0.244 0-0.471 0.056-0.68 0.169-0.184 0.096-0.3 0.208-0.348 0.34l-0.435 1.196h3.024l-0.305 0.836h-3.025l-0.93 2.555h-0.843l1.67-4.587c0.136-0.375 0.423-0.698 0.854-0.965 0.42-0.257 0.861-0.387 1.322-0.387h4.098c0.436 0 0.758 0.121 0.971 0.36 0.234 0.24 0.299 0.616 0.195 1.128z"/><path d="m338.58 233.38c0.017-0.235-0.055-0.396-0.213-0.482-0.059-0.036-0.125-0.062-0.199-0.075-0.076-0.013-0.154-0.02-0.234-0.02h-1.979c-0.199 0-0.396 0.038-0.592 0.116-0.227 0.086-0.363 0.194-0.41 0.326l-1.086 2.983h-0.844l1.551-4.261h0.844l-0.064 0.176c0.167-0.063 0.322-0.108 0.467-0.136 0.143-0.027 0.287-0.041 0.434-0.041h1.984c0.375 0 0.683 0.095 0.922 0.285 0.287 0.231 0.371 0.607 0.255 1.128h-0.836z"/><path d="m346.08 233.23c-0.144 0.395-0.456 0.718-0.938 0.972-0.396 0.208-0.801 0.312-1.207 0.312h-1.979c-0.131 0-0.253-0.01-0.368-0.033-0.114-0.022-0.253-0.065-0.415-0.129l-0.207 0.57-6e-3 0.014c-0.029 0.118 0.041 0.225 0.211 0.32 0.072 0.05 0.148 0.084 0.227 0.106 0.078 0.02 0.159 0.03 0.24 0.03h1.979c0.08 0 0.163-7e-3 0.247-0.02 0.085-0.014 0.169-0.04 0.255-0.075 0.221-0.087 0.409-0.248 0.563-0.483h0.835c-0.26 0.516-0.617 0.89-1.073 1.122-0.374 0.194-0.751 0.292-1.132 0.292h-1.979c-0.381 0-0.699-0.099-0.957-0.299-0.322-0.25-0.409-0.578-0.262-0.985l0.621-1.706c0.147-0.404 0.453-0.725 0.916-0.966 0.391-0.204 0.802-0.305 1.232-0.305h1.979c0.416 0 0.748 0.097 0.994 0.292 0.298 0.24 0.374 0.563 0.224 0.971zm-0.849 0.014c0.041-0.108 0-0.204-0.119-0.285-0.13-0.104-0.317-0.156-0.562-0.156h-1.972c-0.172 0-0.367 0.038-0.585 0.116-0.229 0.082-0.367 0.188-0.415 0.319-0.047 0.126 0.012 0.233 0.176 0.319 0.146 0.082 0.316 0.122 0.506 0.122h1.979c0.234 0 0.456-0.049 0.665-0.149 0.179-0.082 0.288-0.177 0.327-0.286z"/><path d="m352.71 233.23c-0.145 0.395-0.457 0.718-0.938 0.972-0.397 0.208-0.801 0.312-1.208 0.312h-1.978c-0.132 0-0.253-0.01-0.368-0.033-0.114-0.022-0.253-0.065-0.414-0.129l-0.209 0.57-4e-3 0.014c-0.03 0.118 0.039 0.225 0.209 0.32 0.072 0.05 0.148 0.084 0.227 0.106 0.079 0.02 0.16 0.03 0.24 0.03h1.979c0.08 0 0.164-7e-3 0.248-0.02 0.084-0.014 0.17-0.04 0.255-0.075 0.222-0.087 0.409-0.248 0.563-0.483h0.834c-0.26 0.516-0.617 0.89-1.072 1.122-0.375 0.194-0.752 0.292-1.133 0.292h-1.979c-0.38 0-0.699-0.099-0.957-0.299-0.322-0.25-0.408-0.578-0.26-0.985l0.62-1.706c0.147-0.404 0.452-0.725 0.917-0.966 0.39-0.204 0.801-0.305 1.23-0.305h1.979c0.416 0 0.748 0.097 0.994 0.292 0.299 0.24 0.373 0.563 0.225 0.971zm-0.848 0.014c0.039-0.108-2e-3 -0.204-0.121-0.285-0.129-0.104-0.316-0.156-0.561-0.156h-1.972c-0.172 0-0.368 0.038-0.585 0.116-0.229 0.082-0.367 0.188-0.416 0.319-0.045 0.126 0.014 0.233 0.176 0.319 0.147 0.082 0.316 0.122 0.506 0.122h1.979c0.234 0 0.457-0.049 0.666-0.149 0.179-0.082 0.287-0.177 0.328-0.286z"/><path d="m365.45 235.84c-0.404 0.253-0.84 0.38-1.307 0.38h-4.111c-0.432 0-0.754-0.116-0.969-0.347-0.23-0.249-0.295-0.629-0.195-1.141h0.836c-0.029 0.24 0.017 0.412 0.138 0.516h-7e-3c0.121 0.09 0.289 0.136 0.501 0.136h4.112c0.239 0 0.464-0.057 0.672-0.169 0.19-0.101 0.31-0.215 0.357-0.347l0.248-0.68c0.047-0.131 0.012-0.247-0.105-0.347-0.125-0.113-0.313-0.17-0.557-0.17h-4.104c-0.462 0-0.808-0.126-1.036-0.38-0.244-0.264-0.297-0.588-0.154-0.979l0.248-0.68c0.136-0.375 0.422-0.698 0.854-0.965 0.42-0.257 0.861-0.387 1.322-0.387h4.113c0.43 0 0.75 0.121 0.962 0.36 0.234 0.24 0.3 0.616 0.194 1.128h-0.835c0.028-0.24-0.019-0.413-0.14-0.516h7e-3c-0.112-0.086-0.278-0.129-0.495-0.129h-4.112c-0.245 0-0.474 0.056-0.687 0.169-0.186 0.096-0.301 0.208-0.348 0.34l-0.248 0.68c-0.05 0.136-0.018 0.254 0.096 0.354 0.126 0.113 0.314 0.169 0.563 0.169h4.112c0.466 0 0.811 0.127 1.029 0.381 0.242 0.267 0.295 0.59 0.156 0.972l-0.248 0.68c-0.138 0.385-0.426 0.71-0.862 0.972z"/><path d="m371.98 235.91c-0.393 0.208-0.796 0.312-1.207 0.312h-1.978c-0.404 0-0.73-0.102-0.982-0.305-0.305-0.25-0.383-0.577-0.236-0.979l0.621-1.706c0.145-0.395 0.456-0.718 0.939-0.972 0.396-0.208 0.802-0.312 1.213-0.312h1.979c0.389 0 0.71 0.097 0.961 0.292 0.314 0.254 0.4 0.582 0.252 0.985l-0.623 1.713c-0.144 0.393-0.456 0.718-0.939 0.972zm0.718-2.685c0.046-0.127-0.013-0.232-0.175-0.32-0.139-0.077-0.307-0.115-0.502-0.115h-1.979c-0.199 0-0.393 0.036-0.582 0.108-0.232 0.091-0.371 0.199-0.418 0.326l-0.625 1.72c-0.047 0.127 0.012 0.233 0.175 0.319 0.147 0.081 0.313 0.122 0.5 0.122h1.984c0.091 0 0.183-9e-3 0.282-0.027 0.096-0.019 0.195-0.047 0.296-0.089 0.232-0.09 0.372-0.201 0.42-0.332z"/><path d="m375.84 232.8-1.247 3.425h-0.843l1.695-4.662c0.146-0.399 0.419-0.718 0.82-0.959 0.352-0.208 0.792-0.312 1.322-0.312l-0.299 0.823c-0.332 0.049-0.572 0.113-0.723 0.189-0.15 0.078-0.242 0.165-0.277 0.259l-0.146 0.401h0.842l-0.304 0.836z"/><path d="m379.66 232.8-1.246 3.425h-0.85l1.246-3.425h-0.836l0.305-0.836h0.836l0.611-1.678h0.849l-0.61 1.678h0.843l-0.304 0.836z"/><path d="m386.09 235.9c-0.357 0.213-0.762 0.32-1.21 0.32-0.244 0-0.473-0.035-0.683-0.103-0.211-0.068-0.39-0.174-0.537-0.319-0.254 0.141-0.517 0.247-0.785 0.319-0.269 0.073-0.525 0.109-0.771 0.109-0.431 0-0.752-0.104-0.966-0.312-0.236-0.236-0.279-0.56-0.13-0.972l1.083-2.977h0.844l-1.086 2.983c-0.047 0.127-8e-3 0.23 0.117 0.312 0.137 0.086 0.327 0.129 0.571 0.129 0.249 0 0.47-0.043 0.659-0.129 0.186-0.077 0.303-0.183 0.354-0.318l0.668-1.835h0.843l-0.671 1.842c-0.047 0.132-8e-3 0.233 0.121 0.306 0.136 0.086 0.321 0.129 0.557 0.129 0.254 0 0.476-0.043 0.666-0.129 0.188-0.077 0.302-0.179 0.348-0.306l1.086-2.983h0.851l-1.083 2.977c-0.145 0.398-0.428 0.718-0.846 0.957z"/><path d="m392.44 235.92c-0.396 0.204-0.805 0.305-1.226 0.305h-1.978c-0.426 0-0.762-0.099-1.006-0.299-0.295-0.236-0.368-0.559-0.217-0.972 0.145-0.398 0.456-0.72 0.936-0.965 0.396-0.208 0.803-0.313 1.214-0.313h1.979c0.127 0 0.247 0.013 0.36 0.035 0.115 0.022 0.253 0.065 0.415 0.129l0.21-0.578c0.027-0.122-0.04-0.23-0.2-0.326-0.144-0.09-0.299-0.136-0.466-0.136h-1.979c-0.086 0-0.171 7e-3 -0.256 0.02-0.084 0.014-0.169 0.04-0.254 0.075-0.222 0.086-0.41 0.248-0.563 0.482h-0.836c0.264-0.516 0.62-0.89 1.067-1.121 0.374-0.195 0.753-0.292 1.14-0.292h1.983c0.39 0 0.71 0.097 0.96 0.292 0.318 0.245 0.403 0.573 0.254 0.985l-0.621 1.706c-0.145 0.405-0.451 0.728-0.916 0.973zm0.073-0.966c0.046-0.126-0.012-0.233-0.176-0.319-0.146-0.082-0.313-0.123-0.498-0.123h-1.979c-0.231 0-0.455 0.051-0.673 0.151-0.179 0.081-0.288 0.176-0.328 0.285-0.042 0.113-5e-3 0.21 0.11 0.292 0.137 0.099 0.324 0.149 0.565 0.149h1.983c0.195 0 0.387-0.036 0.576-0.109 0.234-0.09 0.373-0.198 0.42-0.326z"/><path d="m399.74 233.38c0.017-0.235-0.054-0.396-0.212-0.482-0.06-0.036-0.126-0.062-0.201-0.075-0.074-0.013-0.152-0.02-0.233-0.02h-1.978c-0.199 0-0.398 0.038-0.594 0.116-0.225 0.086-0.361 0.194-0.41 0.326l-1.086 2.983h-0.843l1.551-4.261h0.843l-0.063 0.176c0.167-0.063 0.323-0.108 0.467-0.136 0.144-0.027 0.288-0.041 0.433-0.041h1.984c0.377 0 0.684 0.095 0.923 0.285 0.287 0.231 0.372 0.607 0.255 1.128h-0.836z"/><path d="m407.24 233.23c-0.144 0.395-0.456 0.718-0.938 0.972-0.398 0.208-0.801 0.312-1.208 0.312h-1.978c-0.133 0-0.254-0.01-0.369-0.033-0.113-0.022-0.252-0.065-0.414-0.129l-0.208 0.57-5e-3 0.014c-0.029 0.118 0.04 0.225 0.209 0.32 0.072 0.05 0.148 0.084 0.227 0.106 0.08 0.02 0.16 0.03 0.24 0.03h1.979c0.081 0 0.164-7e-3 0.248-0.02 0.085-0.014 0.17-0.04 0.256-0.075 0.221-0.087 0.408-0.248 0.563-0.483h0.835c-0.261 0.516-0.617 0.89-1.073 1.122-0.374 0.194-0.752 0.292-1.132 0.292h-1.979c-0.381 0-0.7-0.099-0.958-0.299-0.322-0.25-0.408-0.578-0.26-0.985l0.621-1.706c0.146-0.404 0.452-0.725 0.916-0.966 0.391-0.204 0.801-0.305 1.231-0.305h1.979c0.416 0 0.747 0.097 0.994 0.292 0.298 0.24 0.373 0.563 0.224 0.971zm-0.847 0.014c0.039-0.108-1e-3 -0.204-0.121-0.285-0.129-0.104-0.316-0.156-0.561-0.156h-1.971c-0.172 0-0.368 0.038-0.586 0.116-0.229 0.082-0.367 0.188-0.415 0.319-0.046 0.126 0.013 0.233 0.176 0.319 0.147 0.082 0.315 0.122 0.506 0.122h1.978c0.235 0 0.457-0.049 0.666-0.149 0.179-0.082 0.288-0.177 0.328-0.286z"/></g></g><g transform="matrix(.041859 0 0 .041859 -341.4 -42.453)" fill="#a3a3a3"><path d="m517.32 211.95c0 1.505-0.664 2.771-1.992 3.798-1.221 0.992-2.744 1.487-4.568 1.487h-16.068c-1.682 0-3.107-0.452-4.275-1.354-1.258-0.974-2.055-2.461-2.391-4.462h3.268c0.229 0.938 0.654 1.611 1.274 2.019h-0.026c0.602 0.354 1.318 0.531 2.15 0.531h16.068c0.921 0 1.718-0.213 2.391-0.638 0.602-0.389 0.903-0.85 0.903-1.381v-2.656c0-0.495-0.302-0.938-0.903-1.328-0.708-0.46-1.514-0.691-2.416-0.691h-8.553v-3.267h8.578c0.939 0 1.736-0.221 2.391-0.664 0.602-0.389 0.903-0.841 0.903-1.354v-2.656c0-0.496-0.302-0.938-0.903-1.328-0.708-0.46-1.514-0.69-2.416-0.69h-16.043c-0.814 0-1.522 0.177-2.124 0.531h0.026c-0.637 0.372-1.071 1.045-1.301 2.019h-3.268c0.318-2.019 1.098-3.488 2.338-4.409 1.168-0.938 2.611-1.407 4.328-1.407h16.068c1.789 0 3.312 0.496 4.568 1.487 1.328 1.045 1.992 2.311 1.992 3.798 0 1.292-0.053 2.47-0.159 3.532-0.036 0.531-0.212 1.019-0.531 1.461-0.142 0.195-0.306 0.398-0.491 0.611s-0.412 0.443-0.678 0.69c0.514 0.478 0.903 0.921 1.169 1.328 0.301 0.496 0.478 0.974 0.531 1.434 0.107 1.045 0.16 2.231 0.16 3.559z" fill="#a3a3a3" stroke-width="6.3207"/></g></g></g></svg></a>
 © <a target="_blank" rel="noreferrer" href="https://twitter.com/bjperson">Brice Person</a> 2021, données <a target="_blank" rel="noreferrer" href="https://www.data.gouv.fr/fr/datasets/catalogue-des-donnees-de-data-gouv-fr/#datagroove">Etalab</a>. <a target="_blank" rel="noreferrer" href="https://www.etalab.gouv.fr/licence-ouverte-open-licence">Licence ouverte</a> - <a target="_blank" rel="noreferrer" href="https://github.com/bjperson/datagroove">Code source</a></p>
    </footer>

    <script>

    if('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./worker.js').then(sw => {
        sw.onupdatefound = () => {
          const update_sw = sw.installing;
          update_sw.onstatechange = () => {
            switch (update_sw.state) {
              case 'installed':
                if (navigator.serviceWorker.controller) {
                  location.reload();
                }
                break;
            }
          };
        };
      });

      navigator.serviceWorker.onmessage = (event) => {
        if (event.data && event.data.type === 'networkStatus') {
          setNetworkStatus(event.data.online);
        }
      }
    };

    pages = ['flux', 'popular', 'reuses', 'offline'];

    function hello() {
      const urlParams = new URLSearchParams(window.location.search);
      const p = urlParams.get('p');

      if (p) {
        if (pages.includes(p)) {
          if (p === 'flux') {
            showFlux();
          }
          else if (p === 'popular') {
            showPopular();
          }
          else if (p === 'reuses') {
            showReuses();
          }
          else if (p === 'offline') {
            $("#content").load("offline.html");
          }
        }
        else {
          l = p.split('_');
          loadReport(isoDateToPath(l[0]));
        }
      }
      else {
        showFlux();
      }
    }

    function showFlux() {
      $("#content").load("flux.html");
      history.pushState(null, 'Flux RSS disponibles - DataGroove', '?p=flux');
    }

    function showPopular() {
      $("#content").load("pages/p/index.html", function() {
        $('.dataset').on("click", toggleDataset);
        $('.dataset_desc').on("click", function(e) {
          e.stopImmediatePropagation();
        });
      });
      history.pushState(null, 'Jeux de données populaires sur data.gouv.fr - DataGroove', '?p=popular');
    }

    function showReuses() {
      $("#content").load("pages/r/index.html", function() {
        $('.dataset').on("click", toggleDataset);
        $('.dataset_desc').on("click", function(e) {
          e.stopImmediatePropagation();
        });
      });
      history.pushState(null, 'Réutilisations sur data.gouv.fr - DataGroove', '?p=reuses');
    }

    function uiScrollToId(id) {
      document.querySelector(id).scrollIntoView({
        behavior: 'smooth'
      });
    }

    function latest(path = 'pages/d', period='d') {
      if (path.split('/').length < 5) {
        $.getJSON(path+'/index.json', function(data) {
          latest(path+'/'+data[data.length-1], period);
        });
      }
      else {
        loadReport(path, period);
      }
    }

    function oldest(path = 'pages/d', period='d') {
      if (path.split('/').length < 5) {
        $.getJSON(path+'/index.json', function(data) {
          oldest(path+'/'+data[0], period);
        });
      }
      else {
        loadReport(path, period);
      }
    }

    function toggleDataset() {
      $(this).children('.dataset_desc').toggle();
    }

    function toggleAll() {
      $(this).parent().find('ul li ul').toggle();
    }

    function toggleUl() {
      $(this).parent().children('ul').toggle();
    }

    function loadReport(path = false, period='d') {
      if (path === false) {
        latest();
      }
      else {
        $.get(path+'/index.html', function(data) {
          $('#content').html(data);
          $('h3').on("click", toggleAll);
          $('h4').on("click", toggleUl);
          $('h5').on("click", toggleUl);
          var day_id = $('h2').attr('id');
          history.pushState(null, day_id, '?p='+day_id);
          $('h2').prepend('<span id="back_report"><a href="javascript:browseReports(\''+day_id+'\', \'d\', false);">précédente</a></span> ');
          $('h2').append(' <span id="next_report"><a href="javascript:browseReports(\''+day_id+'\', \'d\', true);">suivante</a></span>');
        })
        .fail(function() {
          latest();
          console.log( path + " : 404" );
        });
      }
    }

    function isoDateToPath(d, period = 'd') {
      dd = d.split('-')
      return 'pages/'+period+'/'+dd.join('/')
    }

    function browseReports(d, period = 'd', next = true) {
      dd = d.split('-');
      day_date = new Date(Number.parseInt(dd[0]), Number.parseInt(dd[1]),Number.parseInt(dd[2]),13,0);

      if (next) {
        day_date.setDate(day_date.getDate() + 1)
      }
      else {
        day_date.setDate(day_date.getDate() - 1)
      }

      day_str = String(day_date.getDate()).padStart(2, "0");

      dd.pop();
      path = 'pages/'+period+'/'+dd.join('/');

      $.getJSON(path+'/index.json', function(data) {
        if (data.includes(day_str)) {
          loadReport(path+'/'+day_str, period);
        }
        else {
          isoDate = day_date.getUTCFullYear()+'-'+String(day_date.getUTCMonth()).padStart(2, "0")+'-'+String(day_date.getUTCDate()).padStart(2, "0");
          browseReports(isoDate, period, next);
        }
      });
    }

    function setNetworkStatus(online) {
      if (online) {
        $('rect').css('fill', '');
      }
      else {
        $('rect').css('fill', 'red');
      }
    }

    $(document).ready(function() {
      hello();
      window.onpopstate = function(e) {
        hello();
      };
      window.addEventListener('online', () => {
        setNetworkStatus(true);
      });
      window.addEventListener('offline', () => {
        setNetworkStatus(false);
      });
    });

    </script>

  </body>
</html>
